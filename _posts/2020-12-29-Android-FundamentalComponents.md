---
layout: post
title:  "Android - 구성요소(컴포넌트)"
date:   2020-12-28 23:04:17 -400
lastmod : 2020-12-28 22:04:17 -400
sitemap :
  changefreq : daily
  priority : 1.0
categories: Android
background: "/img/classic_blue.jpeg"
---


# 앱 컴포넌트 4가지
- 여기서 앱 컴포넌트는 **앱을 구성하는 주요 요소들**을 말한다.    
- 각 컴포넌트는 **사용자나 시스템이 앱에 들어갈 수 있는 진입점**이 된다.  
- 컴포넌트들은 고유한 역할을 가지고 있다.
- 또한 생성 및 소멸 방식을 정의하는 자신만의 생명주기를 가지고 있다. 
 

## :one: Activity

## :two: Service
- 정의: 백그라운드에서 앱을 계속해서 실행시키기 위한 앱의 다목적 진입점
- 역할: 서비스는 백그라운드에서 실행되는 구성요소로, 오래 실행되는 작업을 수행하거나 원격 프로세스를 위한 작업을 수행한다.
- 특징:
    1. 서비스는 유저 인터페이스를 제공하지 않는다. 
    - 예를 들어서 서비스는 백그라운드에서 음악을 제생할 수도 있다. 

## :Broadcast Reciever:
- **브로드캐스트 리시버는 시스템이 앱에게 이벤트를 전달할 수 있도록 하고, 앱으로 하여금 시스템 전역 브로드 캐스트 알림에 응답할 수 있도록 한다.**

- 브로드캐스트 리시버는 앱으로 들어갈 수 있는 있는 진입점이기 때문에, **현재 실행되지 않은 앱에도 브로드 캐스트를 전달할 수 있다.**

- 예를 들어서 앱이 사용자에게 예정된 일정을 알려주기 위한 알람을 예약할 경우,   
알람이 울릴 때까지 앱을 실행시켜둘 필요 없이, 알람을 해당 앱의 브로드 캐스트리시버에게 전달하기만 하면 된다.

- 대다수의 브로드 캐스트는 **시스템에서 발생**한다.

- 예를 들어서, 배터리가 부족하거나 사진을 캡쳐했다는 브로드 캐스트가 대표적이다.

- **앱도 브로드 캐스트를 만들 수 있다.**

- 예를 들어서, 다른 앱에게 기기에 데이터가 다운되었고, 그 데이터를 사용할 수 있도록 하기 위해 브로드 캐스트를 만들 수 있다.  

- **브로드캐스트 리시버는 UI를 표시하지 않지만**, 하지만 브로드캐스트 알림이 왔다는 것을 사용자에게 알리기 위해 **상태바 알림을 만들 수 있다.**

- 하지만 일반적으로 브로드캐스트 리시버는 **다른 구성요소로 가는 문**인 경우가 많고,   
**아주 적은 양의 작업을 수행하도록 많들어진 경우가 많다.**

- 예를 들어서 `JobScheduler`의 이벤트를 기반으로 어떤 작업을 수행하도록 `JobService`를 예약할 수 있다.

- Broadcast Receiver는 `BroadCastReciever`의 자식 클래스로 구현된다.
- 각 브로드캐스트는 `Intent`로서 전달된다. 

## :Contents Provider:
- 콘텐츠 프로바이더는 파일 시스템, SQLite Database, 웹, 혹은 앱에서 접근할 수 있는 모든 영구 저장소에 저장할 수 있는 앱 데이터의 공유 집합을 관리한다.

- 다른 앱은 콘텐츠 프로바이더를 통해서 데이터를 얻어오거나, 콘텐츠 프로바이더가 허용할 경우에는 데이터를 수정할 수 있다.

- 예를 들어서 안드로이드 시스템은 사용자의 연락처 정보를 관리하는 콘텐츠 프로바이더를 제공한다.

    - 따라서 적절할 권한을 가진 앱이라면, 콘텐츠 프로바이더에게 질의하여(ContactsContract.Data 이용함),   
    특정 연락처를 읽거나 쓸 수 있다.  

- 콘텐츠 프로바이더를 데이터베이스에 대한 추상화로 생각하기 쉽다. 콘텐츠 프로바이더에는 이런 일반적인 용도로 만들어진 지원 및 API가 많기 때문이다.  
하지만 시스템 설계 관점에서 볼 때, 콘텐츠 프로바이더와 데이터베이스는 핵심 목적이 다르다.
    - 시스템에게 콘텐츠 프로바이더는 URI 구성표(Scheme)로 식별되면서 이름이 지정된 데이터를 얻어올 목적으로 앱에 진입할 입구이다.
    - 따라서 앱이 자신의 데이터와 URI 네임스페이스를 어떤 방식으로 서로 맵핑할지를 결정할 수 있다.   
    그리고 이 URI를 다른 엔티티로 전달할 수 있다. URI를 전달받은 엔티티는 URI를 이용하여 데이터에 해당 데이터에 접근한다. 

- 시스템이 이렇게 할 수 있는 데에는 앱을 관리하는데 특별한 점이 있기 때문이다.
    1. URI를 할당하는데 앱을 계속 시켜둘 필요가 없다.  
    따라서 URI를 소유한 앱이 종료된 이후에도 URI는 계속 살아있을 수 있다.
    시스템은 URI를 통해서 데이터를 불러올 때만, 해당 URI를 소유한 앱이 실행되도록 하면 된다.
    
    2. URI는 중요하고 세분화된 보안모델을 제공한다.  
    예를 들어서 앱은 클립보드에 있는 이미지에 URI를 할당할 수 있지만, 콘텐츠 프로바이더가 이 URI를 잠금 상태로 만들어서,   
    다른 앱이 해당 이미지를 접근하지 못하도록 만들 수 있다.      
    만약 두번재 앱이 클립보드에서 해당 URI에 접근하려고 할 때, 시스템은 임시적인 URI 사용권한을 부여하여, 그 앱이 해당 데이터를 접근하도록 할 수 있다.  
    하지만 해당 URI의 데이터 외에는 접근할 수 없다.

- 콘텐츠 프로바이더는 특정 앱에서만 사용하고 공유하지 않을 데이터를 접근할 때도 유용하다.

- 콘텐츠 프로바이더는 `ContentsProvider`의 자식 클래스로 구현된다.  
이때 다른 앱이 트랜잭션을 수행할 수 있도록 만드는 API 집합을 구현해야 한다.  
자세한 내용은 [콘텐츠 프로바이더 개발 가이드](https://developer.android.com/guide/topics/providers/content-providers) 에서 확인할 수 있다.
