이 포스팅은 사용자가 아이콘을 클릭했을 때 앱이 어떻게 앱이 시작되는지를 설명한다.  

## 안드로이드 앱 특징
1. Multiple Entry Point  
   - 여러개의 컴포넌트로 이루저여 있고, 각 컴포넌트는 우리 앱 뿐만 아니라 다른 앱에서도 실행시킬 수 있다.
   
   - 각 컴포넌트는 애플리케이션의 entry point 역할을 한다.
   
   - 따라서 main()함수와 같이 하나의 entry point 만을 갖는 전통적인 애플리케이션과는 다르다.

2. Own Little World
   - 모든 안드로이드 앱은 분리된 프로세스에서 실행된다.
   
   - Java Runtime (Dalvik VM 혹은 ARM)에서 각각 자신만의 인스턴스를 갖고 있으며, unique한 user ID를 갖는다.

## 언제 안드로이드 프로세스가 실행되는가?
안드로이드 프로세스는 자신이 필요할 때 실행된다.  

사용자나 다른 시스템 컴포넌트가 우리 애플리케이션에 속한 컴포넌트를 요구하면, 안드로이드 시스템은 앱이 아직 실행되지 않은 경우에 앱의 새로운 
프로세스를 시작한다.  
여기서 말하는 컴포넌트는 서비스가 될 수도 있고, 액티비티가 될 수도 있으며, intent 리시버가 될 수 있다.  

일반적으로 프로세스는 시스템에서 kill하기 전까지 계속 실행된다.  

애플리케이션 프로세스는 이렇듯 필요시에 생되고 lanch 액티비티가 화면에 보이기 전까지 많은 일을 수행한다.  


### 모든 앱은 자신만의 process를 가지고 시작된다.  

기본적으로 안드로이드 앱은 자신만의 안드로이드 프로세스에서 실행된다.  
안드로이드 프로세스는 Linux 프로세스에 해당한다. 따라서 시작될 때 무조건 하나의 스레드를 갖고 있다.  
예를 들어서, 이메일에 있는 하이퍼 링크를 클릭한다면 브라우저를 통해서 웹페이지가 띄워진다. 이메일 앱과 브라우저는 분리된 2개의 애플리케이션이다. 그리고 각자 독립된 프로세스 내에서 실행된다.   

클릭 이벤트는 안드로이드 플랫폼이 새로운 브라우저 프로세스를 시작하도록 하고, 이 프로세스 내에서 브라우저 액티비티 인스턴스가 생성된다.  
다른 애플리케이션에 있는 액티비티도 마찬가지로 시작된다.  

<br/>
<br/>

## Zygote: 새로운 생명, 새로운 프로세스를 생성
안드로이드 시스템이 실행되는 과정을 살펴보자.  
대부분의 Linux 기반 시스템과 마찬가지로 안드로이드 시스템도 부터 로더가 커널을 로드하고 init 프로세스를 시작한다.  

이 init 프로세스가 "daemons"라고 불리는 로우 레벨 Linux 프로세스들을  생성한다. 예를 들어서 android debug daemon, USB daemon 등이 해당한다.  
이러한 데몬들은 통상적으로 radio 인터페이스와 같이 로우 레벨 하드웨어 인터페이스를 다룬다.

이후, init 프로세스가 `Zygote` 라는 프로세스를 시작한다.  

이 프로세스가 나머지 애플리케이션 프로세스를 생성한다.   
또한 Dalvik 가상 머신 인스턴스를 가장 처음 초기화하는 프로세스이다.  
Android 애플리케이션 프레임워크에서 사용하는 모든 공통 클래스들과 시스템에 설치된 다양한 앱을 사용 전에 미리 로드해놓는다.  따라서 다른 프로세스를 생성하기 위해 복제될 준비를 한다.   
그리고 새로운 애플리케이션 프로세스를 위한 VM을 생성하는 요청을 받기 위한 소켓 인터페이스를 리슨하는 작업을 시작한다.  
이 인터페이스를 통해서 요청이 들어오면, 자신을 fork하여 미리 초기화된 VM 인스턴스를 갖는 새로운 프로세스를 만든다.  

zygote 프로세스의 과정이 끝난 후, init 프로세스는 runtime process를 시작한다.

그리고 나서, zygote는 `system server`라는 프로세스를 생성한다.  
system server는 안드로이드 플랫폼의 핵심 서비스들을 생성한다. 대표적으로는 activity manager service, hardware service 등을 생성한다.  

이 작업까지 완료되면, 가장 첫번째 앱 프로세스인 런처 애플리케이션(시작 프로그램)을 시작할 준비가 되었다.  런처 애플리케이션은 홈화면을 표시하는 애플리케이션이다.  

<br/>
<br/>








---
참고  
[Android Application Launch exlained: from Zygote to your Activity.onCreatE()](https://medium.com/android-news/android-application-launch-explained-from-zygote-to-your-activity-oncreate-8a8f036864b)